import{brxGlobalProp as c,brxIframe as S}from"./constant-C-1OIyW7.js";import{d as P,__tla as V}from"./module-D_6o7GTg.js";import"./index-CKpsDP-T.min.js";import{__tla as A}from"./monaco-editor-00CT0F_7.min.js";import{__tla as O}from"./oxide_parser_wasm-2P4Lcsn7.min.js";import{g as W}from"./intellisense-D4O0Eoz-.js";import{l as q}from"./logger-BTW-zIW3.js";import{c as z}from"./index.browser-CJrp5d7n.min.js";import"./virtual-D4KiWvGj.js";import"./index-BJHYLQGk.min.js";import"./isObject-CRxghtyK.min.js";import"./runtime-core.esm-bundler-BgTOpYpR.min.js";import"./set-B6rMqs6z.min.js";Promise.all([(()=>{try{return V}catch{}})(),(()=>{try{return A}catch{}})(),(()=>{try{return O}catch{}})()]).then(async()=>{const m=()=>z("1234567890abcdefghijklmnopqrstuvwxyz",6)();function x(){let r=m();for(;r.match(/^\d/);)r=m();return`windpress${r}`}async function v(){c.$_state.globalVariables=c.$_state.globalVariables.filter(o=>o.category!=="windpress"),c.$_state.globalVariablesCategories.find(o=>o.id==="windpress")||c.$_state.globalVariablesCategories.push({id:"windpress",name:"WindPress"});const r=S.contentWindow.document.querySelector('script[type="text/tailwindcss"]'),i=P(r.textContent);(await W({volume:i})).forEach(o=>{c.$_state.globalVariables.push({id:x(),name:o.key.substring(2),value:o.value,category:"windpress"})})}new BroadcastChannel("windpress").addEventListener("message",async r=>{const i=r.data;i.source==="windpress/autocomplete"&&i.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{v()},1e3)}),v();function C(){var _,E,k,L;if(c.$_state.activePanel!=="element"||!((E=(_=c.$_state)==null?void 0:_.activeElement)!=null&&E.id)||!((k=S)!=null&&k.contentWindow))return;const r=document.querySelector(".expand .options-wrapper"),i=r==null?void 0:r.querySelector(".searchable"),o=r==null?void 0:r.querySelector(".dropdown"),p=o==null?void 0:o.querySelectorAll(".variable-picker-item:not(.title)"),n=(L=document.querySelector(".variable-picker-button.open"))==null?void 0:L.previousElementSibling;if(!n||!(p!=null&&p.length)||!r||!o||!i)return;const $=e=>{var t;const a=((t=e.querySelector("span:first-of-type"))==null?void 0:t.textContent)??"";!n||!a||w(h(a))},j=e=>{var s;const a=((s=e.querySelector("span:first-of-type"))==null?void 0:s.textContent)??"";if(!n||!a)return;const t=h(a);n.value=t,n.click()},I=(e,a)=>{e.forEach(t=>{t.isIntersecting&&!t.target.classList.contains("open")&&t.target.click()})},f=()=>{w(M);const e=n.nextElementSibling;g.observe(e),r.removeEventListener("mouseleave",f)},y=(e,a)=>{e.forEach(t=>{const[s,d]=Object.entries(t)[0]||[];a.insertAdjacentHTML("beforeend",`
                <li class="variable-picker-item">
                    <span>${s}</span>
                    <span class="option-value">${d}</span>
                </li>
            `)}),l.querySelectorAll(".variable-picker-item").forEach(t=>{t.addEventListener("mouseenter",()=>$(t)),t.addEventListener("click",()=>j(t))})},w=e=>{n.value=e,n.dispatchEvent(new Event("input")),n.focus()},h=e=>`var(--${e})`,u=[];o.remove(),p.forEach(e=>{var s,d;const a=((s=e.querySelector("span:first-of-type"))==null?void 0:s.textContent)??"",t=((d=e.querySelector("span.option-value"))==null?void 0:d.textContent)??"";u.push({[a]:t})});const l=document.createElement("ul");l.classList.add("custom-dropdown"),l.setAttribute("style",`
        max-height: calc(32px * 10);
        overflow: hidden;
        overflow-y: auto;
        position: relative;
        scrollbar-color: rgba(0, 0, 0, .4) rgba(0, 0, 0, .2);
        scrollbar-width: thin;
    `),y(u,l),r.appendChild(l),i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()}),i.addEventListener("input",e=>{const a=u.filter(t=>{var s;return(((s=Object.keys(t)[0])==null?void 0:s.toLowerCase())??"").includes(i.value.toLowerCase())});l.innerHTML="",y(a,l)});let M=(n==null?void 0:n.value)??" ";const g=new IntersectionObserver(I,{root:n.parentElement});r.addEventListener("mouseleave",f),g.disconnect()}const b=document.querySelector("#bricks-panel-inner:not(div.bricks-control-popup *)");if(!b)throw q("Inner panel not found, can't initialize preview of variables on hover",{module:"variables",type:"error"}),new Error("Inner panel not found, can't initialize preview of variables on hover");new MutationObserver(C).observe(b,{subtree:!0,childList:!0,attributes:!0}),q("Module loaded!",{module:"variables"})});
