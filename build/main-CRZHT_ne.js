import{i as Te,_ as Z,T as Ae,e as qe,d as We}from"./_plugin-vue_export-helper-C8Ev41l5.min.js";import{l as ee}from"./logger-BTW-zIW3.js";import{L as ze,_ as Me,G as Oe,I as Fe}from"./xmark-K-HL8reD.min.js";import{bde as T,bdeIframe as je}from"./constant-BZV3uY6b.js";import{i as P,q as R,z as Ve,A as G,x as p,u as v,v as f,C as k,D as S,B as A,H as De,r as _,w as K,T as te,L as W,M as L,G as O,J as F,K as j,E as X,F as Ue,S as Be}from"./runtime-core.esm-bundler-BgTOpYpR.min.js";import{d as He,__tla as Re}from"./module-D_6o7GTg.js";import"./index-CKpsDP-T.min.js";import{__tla as Ge}from"./monaco-editor-00CT0F_7.min.js";import{__tla as Ke}from"./oxide_parser_wasm-2P4Lcsn7.min.js";import{g as Xe}from"./intellisense-D4O0Eoz-.js";import{_ as Ye}from"./chevron-right-NRNjl7DH.min.js";import{a as Ne}from"./index-BJHYLQGk.min.js";import{s as Je}from"./set-B6rMqs6z.min.js";import"./isObject-CRxghtyK.min.js";Promise.all([(()=>{try{return Re}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Ke}catch{}})()]).then(async()=>{Te({scope:"#windpressbreakdance-variable-app"});const ae={id:"windpressbreakdance-variable-app-header",class:"cursor:grab bb:1|solid|$(gray200)"},ne={class:"flex gap:10 align-items:center fg:var(dark)"},se={class:"flex align-items:center px:12 py:2"},le={class:"text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},re={__name:"PanelHeader",setup(l){const s=P("variableApp"),t=P("isOpen");function n(){const a=s.querySelector("#windpressbreakdance-variable-app-header");let i=_(!1),r=0,d=0;K(i,h=>{h?(document.body.style.userSelect="none",T.querySelector("div.v-application--wrap").style.pointerEvents="none",a.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),T.querySelector("div.v-application--wrap").style.removeProperty("pointer-events"),a.style.cursor="grab")});const o=h=>{i.value=!0;const g=a.getBoundingClientRect();r=h.clientX-g.left,d=h.clientY-g.top};a.removeEventListener("mousedown",o),a.addEventListener("mousedown",o);const E=h=>{if(!i.value)return;const g=a.getBoundingClientRect(),m=h.clientX,c=h.clientY,b=m-r,w=c-d,I=b<0?0:b>window.innerWidth-g.width?window.innerWidth-g.width:b,$=w<0?0:w>window.innerHeight-g.height?window.innerHeight-g.height:w;s.style.left=`${I}px`,s.style.top=`${$}px`};document.removeEventListener("mousemove",E),document.addEventListener("mousemove",E);const C=h=>{i.value=!1};document.removeEventListener("mouseup",C),document.addEventListener("mouseup",C)}return R(()=>{n()}),(a,i)=>{const r=Ve("inline-svg"),d=Me,o=G("tooltip");return p(),v("div",ae,[f("div",ne,[f("div",se,[k(r,{src:S(ze),class:"inline-svg fill:current font:24"},null,8,["src"])]),A((p(),v("div",le,i[1]||(i[1]=[De(" WindPress ")]))),[[o,{placement:"top",content:`v${a.windpressbreakdance._version}`}]]),A((p(),v("button",{onClick:i[0]||(i[0]=E=>t.value=!S(t)),class:"flex align-items:center py:10 px:12 fg:$(blue600):hover bg:$(blue50):hover"},[k(d,{class:"iconify font:16"})])),[[o,{placement:"top",content:"Close"}]])])])}}},ie={class:"flex-grow:1"},oe={key:0,class:"expansion-panel__body"},ce={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(l,{expose:s}){const t=l,n=_(null),a=Ne(`windpressbreakdance-variable-app.ui.expansion-panels.${t.namespace}`,{[`${t.name}`]:!1},void 0,{mergeDefaults:!0});function i(d){a.value[t.name]=d===null?!a.value[t.name]:d}function r(){n.value.scrollIntoView()}return s({togglePanel:i,scrollIntoView:r}),(d,o)=>{const E=Ye;return p(),v("div",{ref_key:"sectionRef",ref:n,class:"expansion-panel mx:10 py:8 mr:4"},[f("div",{onClick:o[0]||(o[0]=C=>S(a)[l.name]=!S(a)[l.name]),class:W([{},"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"])},[f("div",ie,[te(d.$slots,"header",{},void 0,!0)]),f("div",null,[k(E,{class:W([{"rotate(-90)":S(a)[l.name]},"iconify ~duration:300 font:18"])},null,8,["class"])])]),k(Ae,null,{default:L(()=>[S(a)[l.name]?(p(),v("div",oe,[te(d.$slots,"default",{},void 0,!0)])):O("",!0)]),_:3})],512)}}},V=Z(ce,[["__scopeId","data-v-8d2d37da"]]),ue={class:"{m:10;pb:15}>div"},pe={class:"variable-section-title font:14 my:10"},de={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ve=["onClick","onMouseenter"],me={class:"font:14"},Y={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(l){return(s,t)=>{const n=G("tooltip");return p(),v("div",ue,[(p(!0),v(F,null,j(l.variableItems,(a,i)=>(p(),v("div",{key:i,class:""},[f("div",pe,X(i.replace("_","-")),1),f("div",de,[a.length>0?(p(!0),v(F,{key:0},j(a,(r,d)=>A((p(),v("button",{key:d,onClick:o=>s.$emit("previewChose",o,r.key),onMouseenter:o=>s.$emit("previewEnter",o,r.key),onMouseleave:t[0]||(t[0]=o=>s.$emit("previewLeave")),class:"px:12 py:8 r:8 font:medium fg:$(dark) fg:$(accent-normal):hover bg:$(gray150) bg:$(gray300):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span"},[f("span",me,X(r.label),1)],40,ve)),[[n,{placement:"top",content:`var(${r.key}, ${r.value})`}]])),128)):O("",!0)])]))),128))])}}},be={class:"{m:10;pb:15}>div"},ye={class:"variable-section-title font:14 my:10"},fe={key:0,class:"variable-section-items"},he=["onClick","onMouseenter"],ke=["onClick","onMouseenter"],ge={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(l){return(s,t)=>{const n=G("tooltip");return p(),v("div",be,[(p(!0),v(F,null,j(l.variableItems,(a,i)=>(p(),v("div",{key:i,class:""},[f("div",ye,X(i),1),a.DEFAULT?(p(),v("div",fe,[A(f("button",{onClick:r=>s.$emit("previewChose",r,a.DEFAULT.key),onMouseenter:r=>s.$emit("previewEnter",r,a.DEFAULT.key),onMouseleave:t[0]||(t[0]=r=>s.$emit("previewLeave")),class:W([`bg:$(${a.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,he),[[n,{placement:"top",content:`var(${a.DEFAULT.key}, ${a.DEFAULT.value})`}]])])):O("",!0),a.shades&&Object.keys(a.shades).length>0?(p(),v("div",{key:1,class:W([[{},Object.keys(a.shades).length>1?"rl:4>div:first-child>button rr:4>div:last-child>button":"",`grid-template-cols:repeat(${Object.keys(a.shades).length},auto)`],"variable-section-items grid r:4 overflow:hidden"])},[(p(!0),v(F,null,j(a.shades,(r,d)=>(p(),v("div",{key:d,class:"flex gap:10"},[A(f("button",{onClick:o=>s.$emit("previewChose",o,r.key),onMouseenter:o=>s.$emit("previewEnter",o,r.key),onMouseleave:t[1]||(t[1]=o=>s.$emit("previewLeave")),class:W([`bg:$(${r.key.slice(2)})`,"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,ke),[[n,{placement:"top",content:`var(${r.key}, ${r.value})`}]])]))),128))],2)):O("",!0)]))),128))])}}},we={id:"windpressbreakdance-variable-app-body",class:"rel w:full h:full overflow-y:scroll! bb:1|solid|$(gray200)>div:not(:last-child)"},_e=1e3,Ee={__name:"PanelBody",setup(l){const s=_({colors:{},typography:{},sizing:{}}),t=P("focusedInput"),n=P("recentVariableSelectionTimestamp"),a=P("tempInputValue"),i=P("variableApp");async function r(){const m=je.contentWindow.document.querySelector('script[type="text/tailwindcss"]'),c=He(m.textContent),b=await Xe({volume:c});let w=i.querySelector("style#windpressbreakdance-variable-app-body-style");w||(w=document.createElement("style"),w.id="windpressbreakdance-variable-app-body-style",i.appendChild(w)),w.innerHTML=`
        #windpressbreakdance-variable-app-body {
            ${b.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const I={};b.filter(e=>e.key.startsWith("--color")).forEach(e=>{const u=e.key.slice(8),B=u.split("-");let H="";if(B.length>1){const Pe=B[0],Se=B.slice(1).join("-");H=`${Pe}.shades.'${Se}'`}else H=`${u}.DEFAULT`;Je(I,H,e)}),s.value.colors=Object.keys(I).sort().reduce((e,u)=>(e[u]=I[u],e),{});const $={font_size:[],line_height:[],letter_spacing:[]};b.filter(e=>e.key.startsWith("--font-size-")&&!e.key.endsWith("--line-height")).forEach(e=>{const u=e.key.slice(12);$.font_size.push({key:e.key,label:u,value:e.value})}),b.filter(e=>e.key.startsWith("--line-height-")||e.key.endsWith("--line-height")).forEach(e=>{const u=e.key.startsWith("--line-height-")?e.key.slice(14):e.key.slice(2,-13);$.line_height.push({key:e.key,label:u,value:e.value})}),$.line_height.sort((e,u)=>e.label.startsWith("font-size-")&&!u.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&u.label.startsWith("font-size-")?-1:0),b.filter(e=>e.key.startsWith("--letter-spacing-")).forEach(e=>{const u=e.key.slice(17);$.letter_spacing.push({key:e.key,label:u,value:e.value})}),s.value.typography=$;const y={spacing:[],width:[],breakpoint:[]};b.filter(e=>e.key.startsWith("--spacing-")).forEach(e=>{const u=e.key.slice(10);y.spacing.push({key:e.key,label:u,value:e.value})}),b.filter(e=>e.key.startsWith("--width-")).forEach(e=>{const u=e.key.slice(8);y.width.push({key:e.key,label:u,value:e.value})}),b.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const u=e.key.slice(13);y.breakpoint.push({key:e.key,label:u,value:e.value})}),s.value.sizing=y}const d=_(null),o=_(null),E=_(null);K(t,m=>{if(m){const c=m.closest("[data-test-id]"),b=["color"].some(y=>c.getAttribute("data-test-id").includes(y)),w=["fontSize"].some(y=>c.getAttribute("data-test-id").includes(y)),I=["spacing","size-width"].some(y=>c.getAttribute("data-test-id").includes(y));o.value.togglePanel(!1),E.value.togglePanel(!1),d.value.togglePanel(!1);async function $(){for(;m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit")===null;)await new Promise(y=>setTimeout(y,10));for(m.parentElement.parentElement.parentElement.querySelector("div.dropdown>button.breakdance-unit-input-unit").click();document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title")===null;)await new Promise(y=>setTimeout(y,10));document.querySelector(".v-menu__content.menuable__content__active .dropdown-content .v-list .v-list-item:last-child .v-list-item__title").click(),setTimeout(()=>{m.focus()},100)}b?(d.value.togglePanel(!0),d.value.scrollIntoView()):w?(o.value.togglePanel(!0),o.value.scrollIntoView(),$()):I&&(E.value.togglePanel(!0),E.value.scrollIntoView(),$())}});function C(m,c){performance.now()-n.value<_e||t.value&&(t.value.value=`var(${c})`,t.value.dispatchEvent(new Event("input")),t.value.focus())}function h(m){!t.value||a.value===null||(t.value.value=a.value,t.value.dispatchEvent(new Event("input")),t.value.focus())}function g(m,c){t.value&&(t.value.value=`var(${c})`,t.value.dispatchEvent(new Event("input")),t.value.focus(),a.value=`var(${c})`,n.value=performance.now())}return R(()=>{r()}),new BroadcastChannel("windpress").addEventListener("message",async m=>{const c=m.data;c.source==="windpress/autocomplete"&&c.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{r()},1e3)}),(m,c)=>(p(),v("div",we,[k(V,{namespace:"variable",name:"color",ref_key:"sectionColor",ref:d},{header:L(()=>c[0]||(c[0]=[f("span",{class:"font:semibold"},"Color",-1)])),default:L(()=>[k(ge,{variableItems:s.value.colors,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:g},null,8,["variableItems"])]),_:1},512),k(V,{namespace:"variable",name:"typography",ref_key:"sectionTypography",ref:o},{header:L(()=>c[1]||(c[1]=[f("span",{class:"font:semibold"},"Typography",-1)])),default:L(()=>[k(Y,{variableItems:s.value.typography,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:g},null,8,["variableItems"])]),_:1},512),k(V,{namespace:"variable",name:"spacing",ref_key:"sectionSpacing",ref:E,class:""},{header:L(()=>c[2]||(c[2]=[f("span",{class:"font:semibold"},"Sizing",-1)])),default:L(()=>[k(Y,{variableItems:s.value.sizing,onPreviewEnter:C,onPreviewLeave:h,onPreviewChose:g},null,8,["variableItems"])]),_:1},512)]))}},$e=Z(Ee,[["__scopeId","data-v-605c7263"]]),xe={__name:"App",setup(l){const s=P("isOpen"),t=_(null);function n(){T.classList.contains("theme--light")?(t.value.classList.add("theme--light"),t.value.classList.remove("theme--dark")):T.classList.contains("theme--dark")&&(t.value.classList.add("theme--dark"),t.value.classList.remove("theme--light"))}return new MutationObserver(a=>{a.forEach(i=>{i.attributeName==="class"&&n()})}).observe(T,{attributes:!0,attributeFilter:["class"],childList:!1,subtree:!1}),R(()=>{n()}),(a,i)=>A((p(),v("div",{id:"windpressbreakdance-variable-app-container",ref_key:"containerRef",ref:t,class:"v-application flex flex:column w:full h:full"},[k(re),(p(),Ue(Be,null,{default:L(()=>[k($e)]),_:1}))],512)),[[qe,S(s)]])}};function Le({selector:l,callback:s,options:t}){const n=new MutationObserver(s),a=document.querySelector(l);if(!a){ee(`Target not found for selector: ${l}`,{module:"variable-picker",type:"error"});return}const i={childList:!0,subtree:!0};n.observe(a,Object.assign(Object.assign({},i),t))}const z=document.createElement("windpressbreakdance-variable-app");z.id="windpressbreakdance-variable-app",T.appendChild(z);const q=_(!1),M=_(null),D=_(null),Ce=_(0),x=We(xe);x.config.globalProperties.windpressbreakdance=window.windpressbreakdance,x.provide("variableApp",z),x.provide("isOpen",q),x.provide("focusedInput",M),x.provide("tempInputValue",D),x.provide("recentVariableSelectionTimestamp",Ce),x.use(Oe,{container:"#windpressbreakdance-variable-app"}),x.component("inline-svg",Fe),x.mount("#windpressbreakdance-variable-app");function N(l){var s;!l.shiftKey||!l.target||((s=document==null?void 0:document.getSelection())==null||s.removeAllRanges(),l.preventDefault(),l.stopPropagation(),M.value=l.target,D.value=l.target.value,q.value=!0)}function J(l){M.value=l.target}const Ie={includedFields:["div.breakdance-control-wrapper-input-wrapper div.breakdance-text-input-wrapper"],excludedFields:[]};function Q(){setTimeout(()=>{let l=!1;Ie.includedFields.forEach(s=>{(typeof s=="string"?[...document.querySelectorAll(s)]:[...document.querySelectorAll(s.selector)].filter(t=>s.hasChild.some(n=>t.querySelector(n)))).forEach(t=>{const n=t.querySelector("input[type='text']");(n==null?void 0:n.getAttribute("windpressbreakdance-variable-app"))!=="listened"&&(n==null||n.removeEventListener("click",N),n==null||n.addEventListener("click",N),n==null||n.removeEventListener("focus",J),n==null||n.addEventListener("focus",J),n==null||n.setAttribute("windpressbreakdance-variable-app","listened"),l=!0)})}),l&&(M.value=null,D.value=null)},100)}let U=!1;Le({selector:"div:has(>div.breakdance-add-panel)",options:{subtree:!0,childList:!0},callback(){U||(U=!0,Q(),setTimeout(()=>{U=!1},100))}}),Q(),document.addEventListener("keydown",l=>{l.key==="Escape"&&q.value&&(q.value=!1)}),K(q,l=>{z.style.zIndex=l?"calc(Infinity)":"-1"}),ee("Module loaded!",{module:"variable-picker"})});
