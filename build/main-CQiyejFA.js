import{i as Ae,_ as Z,T as qe,e as je,d as ze}from"./_plugin-vue_export-helper-C8Ev41l5.min.js";import{l as ee}from"./logger-BTW-zIW3.js";import{L as Me,_ as De,G as Ve,I as Fe}from"./xmark-K-HL8reD.min.js";import{uni as te,uniIframe as Be}from"./constant-V9Qf7smn.js";import{i as P,q as se,z as Ue,A as K,x as p,u as v,v as b,C as g,D as L,B as S,H as He,r as _,w as z,T as le,L as M,M as x,G as D,J as V,K as F,E as X,F as Re,S as Ge}from"./runtime-core.esm-bundler-BgTOpYpR.min.js";import{d as Ke,__tla as Xe}from"./module-D_6o7GTg.js";import"./index-CKpsDP-T.min.js";import{__tla as Ye}from"./monaco-editor-00CT0F_7.min.js";import{__tla as Je}from"./oxide_parser_wasm-2P4Lcsn7.min.js";import{g as Ne}from"./intellisense-D4O0Eoz-.js";import{_ as Qe}from"./chevron-right-NRNjl7DH.min.js";import{a as Ze}from"./index-BJHYLQGk.min.js";import{s as et}from"./set-B6rMqs6z.min.js";import"./isObject-CRxghtyK.min.js";Promise.all([(()=>{try{return Xe}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return Je}catch{}})()]).then(async()=>{Ae({scope:"#windpressbuilderius-variable-app"});const ae={id:"windpressbuilderius-variable-app-header",class:"bg:$(primary-1) cursor:grab bb:1|solid|$(primary-3)"},ne={class:"flex gap:10 align-items:center fg:$(base-2)"},ie={class:"flex px:12 py:2 align-items:center"},re={class:"text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},oe={__name:"PanelHeader",setup(l){const a=P("variableApp"),n=P("isOpen");function u(){const s=a.querySelector("#windpressbuilderius-variable-app-header");let t=_(!1),r=0,d=0;z(t,h=>{h?(document.body.style.userSelect="none",te.style.pointerEvents="none",s.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),te.style.removeProperty("pointer-events"),s.style.cursor="grab")});const o=h=>{t.value=!0;const w=s.getBoundingClientRect();r=h.clientX-w.left,d=h.clientY-w.top};s.removeEventListener("mousedown",o),s.addEventListener("mousedown",o);const $=h=>{if(!t.value)return;const w=s.getBoundingClientRect(),A=h.clientX,m=h.clientY,i=A-r,y=m-d,k=i<0?0:i>window.innerWidth-w.width?window.innerWidth-w.width:i,E=y<0?0:y>window.innerHeight-w.height?window.innerHeight-w.height:y;a.style.left=`${k}px`,a.style.top=`${E}px`};document.removeEventListener("mousemove",$),document.addEventListener("mousemove",$);const I=h=>{t.value=!1};document.removeEventListener("mouseup",I),document.addEventListener("mouseup",I)}return se(()=>{u()}),(s,t)=>{const r=Ue("inline-svg"),d=De,o=K("tooltip");return p(),v("div",ae,[b("div",ne,[b("div",ie,[g(r,{src:L(Me),class:"inline-svg fill:current font:24"},null,8,["src"])]),S((p(),v("div",re,t[1]||(t[1]=[He(" WindPress ")]))),[[o,{placement:"top",content:`v${s.windpressbuilderius._version}`}]]),S((p(),v("button",{onClick:t[0]||(t[0]=$=>n.value=!L(n)),class:"uniPanelIconButton r:0 bg:$(primary-3):hover py:10 px:12"},[g(d,{class:"iconify fg:$(base-2) font:16"})])),[[o,{placement:"top",content:"Close"}]])])])}}},ue={class:"flex-grow:1"},ce={key:0,class:"expansion-panel__body"},pe={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(l,{expose:a}){const n=l,u=_(null),s=Ze(`windpressbuilderius-variable-app.ui.expansion-panels.${n.namespace}`,{[`${n.name}`]:!1},void 0,{mergeDefaults:!0});function t(d){s.value[n.name]=d===null?!s.value[n.name]:d}function r(){u.value.scrollIntoView()}return a({togglePanel:t,scrollIntoView:r}),(d,o)=>{const $=Qe;return p(),v("div",{ref_key:"sectionRef",ref:u,class:"expansion-panel mx:10 py:8"},[b("div",{onClick:o[0]||(o[0]=I=>L(s)[l.name]=!L(s)[l.name]),class:"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"},[b("div",ue,[le(d.$slots,"header",{},void 0,!0)]),b("div",null,[g($,{class:M([{"rotate(-90)":L(s)[l.name]},"iconify ~duration:300 font:18"])},null,8,["class"])])]),g(qe,null,{default:x(()=>[L(s)[l.name]?(p(),v("div",ce,[le(d.$slots,"default",{},void 0,!0)])):D("",!0)]),_:3})],512)}}},B=Z(pe,[["__scopeId","data-v-1c652df4"]]),de={class:"{m:10;pb:15}>div"},ve={class:"variable-section-title font:14 my:10"},me={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ye=["onClick","onMouseenter"],be={class:"font:14"},Y={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(l){return(a,n)=>{const u=K("tooltip");return p(),v("div",de,[(p(!0),v(V,null,F(l.variableItems,(s,t)=>(p(),v("div",{key:t,class:""},[b("div",ve,X(t.replace("_","-")),1),b("div",me,[s.length>0?(p(!0),v(V,{key:0},F(s,(r,d)=>S((p(),v("button",{key:d,onClick:o=>a.$emit("previewChose",o,r.key),onMouseenter:o=>a.$emit("previewEnter",o,r.key),onMouseleave:n[0]||(n[0]=o=>a.$emit("previewLeave")),class:"px:12 py:8 r:8 fg:$(base-1) fg:$(accent-normal):hover bg:$(primary-3) bg:$(primary-2):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span"},[b("span",be,X(r.label),1)],40,ye)),[[u,{placement:"top",content:`var(${r.key}, ${r.value})`}]])),128)):D("",!0)])]))),128))])}}},fe={class:"{m:10;pb:15}>div"},he={class:"variable-section-title font:14 my:10"},ge={key:0,class:"variable-section-items"},we=["onClick","onMouseenter"],ke=["onClick","onMouseenter"],_e={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(l){return(a,n)=>{const u=K("tooltip");return p(),v("div",fe,[(p(!0),v(V,null,F(l.variableItems,(s,t)=>(p(),v("div",{key:t,class:""},[b("div",he,X(t),1),s.DEFAULT?(p(),v("div",ge,[S(b("button",{onClick:r=>a.$emit("previewChose",r,s.DEFAULT.key),onMouseenter:r=>a.$emit("previewEnter",r,s.DEFAULT.key),onMouseleave:n[0]||(n[0]=r=>a.$emit("previewLeave")),class:M([`bg:$(${s.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,we),[[u,{placement:"top",content:`var(${s.DEFAULT.key}, ${s.DEFAULT.value})`}]])])):D("",!0),s.shades&&Object.keys(s.shades).length>0?(p(),v("div",{key:1,class:M([[{},Object.keys(s.shades).length>1?"rl:4>div:first-child>button rr:4>div:last-child>button":"",`grid-template-cols:repeat(${Object.keys(s.shades).length},auto)`],"variable-section-items grid r:4 overflow:hidden"])},[(p(!0),v(V,null,F(s.shades,(r,d)=>(p(),v("div",{key:d,class:"flex gap:10"},[S(b("button",{onClick:o=>a.$emit("previewChose",o,r.key),onMouseenter:o=>a.$emit("previewEnter",o,r.key),onMouseleave:n[1]||(n[1]=o=>a.$emit("previewLeave")),class:M([`bg:$(${r.key.slice(2)})`,"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,ke),[[u,{placement:"top",content:`var(${r.key}, ${r.value})`}]])]))),128))],2)):D("",!0)]))),128))])}}},$e={id:"windpressbuilderius-variable-app-body",class:"rel w:full h:full overflow-y:scroll! bb:1|solid|$(primary-3)>div:not(:last-child)"},Ee=1e3,Ce={__name:"PanelBody",setup(l){const a=_({colors:{},typography:{},sizing:{}}),n=P("focusedInput"),u=P("recentVariableSelectionTimestamp"),s=P("tempInputValue"),t=P("variableApp");async function r(){const m=Be.contentWindow.document.querySelector('script[type="text/tailwindcss"]'),i=Ke(m.textContent),y=await Ne({volume:i});let k=t.querySelector("style#windpressbuilderius-variable-app-body-style");k||(k=document.createElement("style"),k.id="windpressbuilderius-variable-app-body-style",t.appendChild(k)),k.innerHTML=`
        #windpressbuilderius-variable-app-body {
            ${y.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const E={};y.filter(e=>e.key.startsWith("--color")).forEach(e=>{const c=e.key.slice(8),R=c.split("-");let G="";if(R.length>1){const We=R[0],Oe=R.slice(1).join("-");G=`${We}.shades.'${Oe}'`}else G=`${c}.DEFAULT`;et(E,G,e)}),a.value.colors=Object.keys(E).sort().reduce((e,c)=>(e[c]=E[c],e),{});const f={font_size:[],line_height:[],letter_spacing:[]};y.filter(e=>e.key.startsWith("--font-size-")&&!e.key.endsWith("--line-height")).forEach(e=>{const c=e.key.slice(12);f.font_size.push({key:e.key,label:c,value:e.value})}),y.filter(e=>e.key.startsWith("--line-height-")||e.key.endsWith("--line-height")).forEach(e=>{const c=e.key.startsWith("--line-height-")?e.key.slice(14):e.key.slice(2,-13);f.line_height.push({key:e.key,label:c,value:e.value})}),f.line_height.sort((e,c)=>e.label.startsWith("font-size-")&&!c.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&c.label.startsWith("font-size-")?-1:0),y.filter(e=>e.key.startsWith("--letter-spacing-")).forEach(e=>{const c=e.key.slice(17);f.letter_spacing.push({key:e.key,label:c,value:e.value})}),a.value.typography=f;const j={spacing:[],width:[],breakpoint:[]};y.filter(e=>e.key.startsWith("--spacing-")).forEach(e=>{const c=e.key.slice(10);j.spacing.push({key:e.key,label:c,value:e.value})}),y.filter(e=>e.key.startsWith("--width-")).forEach(e=>{const c=e.key.slice(8);j.width.push({key:e.key,label:c,value:e.value})}),y.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const c=e.key.slice(13);j.breakpoint.push({key:e.key,label:c,value:e.value})}),a.value.sizing=j}const d=_(null),o=_(null),$=_(null);z(n,m=>{if(m){const i=m.getAttribute("name"),y=["color","backgroundColor"].some(f=>i.includes(f)),k=["fontSize"].some(f=>i.includes(f)),E=["padding","margin","gap","width","height"].some(f=>i.includes(f));o.value.togglePanel(!1),$.value.togglePanel(!1),d.value.togglePanel(!1),y?(d.value.togglePanel(!0),d.value.scrollIntoView()):k?(o.value.togglePanel(!0),o.value.scrollIntoView()):E&&($.value.togglePanel(!0),$.value.scrollIntoView())}});function I(m,i){const y=Object.getOwnPropertyDescriptor(m,"value").set,k=Object.getPrototypeOf(m),E=Object.getOwnPropertyDescriptor(k,"value").set;y&&y!==E?E.call(m,i):y.call(m,i);const f=new Event("input",{bubbles:!0});m.dispatchEvent(f)}function h(m,i){performance.now()-u.value<Ee||n.value&&I(n.value,`var(${i})`)}function w(m){!n.value||s.value===null||I(n.value,s.value)}function A(m,i){n.value&&(I(n.value,`var(${i})`),s.value=`var(${i})`,u.value=performance.now())}return se(()=>{r()}),new BroadcastChannel("windpress").addEventListener("message",async m=>{const i=m.data;i.source==="windpress/autocomplete"&&i.task==="windpress.code-editor.saved.done"&&setTimeout(()=>{r()},1e3)}),(m,i)=>(p(),v("div",$e,[g(B,{namespace:"variable",name:"color",ref_key:"sectionColor",ref:d},{header:x(()=>i[0]||(i[0]=[b("span",{class:"font:semibold"},"Color",-1)])),default:x(()=>[g(_e,{variableItems:a.value.colors,onPreviewEnter:h,onPreviewLeave:w,onPreviewChose:A},null,8,["variableItems"])]),_:1},512),g(B,{namespace:"variable",name:"typography",ref_key:"sectionTypography",ref:o},{header:x(()=>i[1]||(i[1]=[b("span",{class:"font:semibold"},"Typography",-1)])),default:x(()=>[g(Y,{variableItems:a.value.typography,onPreviewEnter:h,onPreviewLeave:w,onPreviewChose:A},null,8,["variableItems"])]),_:1},512),g(B,{namespace:"variable",name:"spacing",ref_key:"sectionSpacing",ref:$,class:""},{header:x(()=>i[2]||(i[2]=[b("span",{class:"font:semibold"},"Sizing",-1)])),default:x(()=>[g(Y,{variableItems:a.value.sizing,onPreviewEnter:h,onPreviewLeave:w,onPreviewChose:A},null,8,["variableItems"])]),_:1},512)]))}},xe=Z(Ce,[["__scopeId","data-v-b97c901d"]]),Ie={id:"windpressbuilderius-variable-app-container",class:"flex flex:column w:full h:full fg:$(base-2) bg:$(primary-1)"},Pe={__name:"App",setup(l){const a=P("isOpen");return(n,u)=>S((p(),v("div",Ie,[g(oe),(p(),Re(Ge,null,{default:x(()=>[g(xe)]),_:1}))],512)),[[je,L(a)]])}};function Le({selector:l,callback:a,options:n}){const u=new MutationObserver(a),s=document.querySelector(l);if(!s){ee(`Target not found for selector: ${l}`,{module:"variable-picker",type:"error"});return}const t={childList:!0,subtree:!0};u.observe(s,Object.assign(Object.assign({},t),n))}const T=document.createElement("windpressbuilderius-variable-app");T.id="windpressbuilderius-variable-app",document.body.appendChild(T);for(const l of document.getElementById("builderius-builder-css").sheet.cssRules)if(l.selectorText&&l.selectorText.includes("#builderiusPanel"))for(let a=0;a<l.style.length;a++){const n=l.style[a];n.startsWith("--")&&T.style.setProperty(n,l.style.getPropertyValue(n).trim())}const W=_(!1),O=_(null),q=_(null),Se=_(0),U=_(null),C=ze(Pe);C.config.globalProperties.windpressbuilderius=window.windpressbuilderius,C.provide("variableApp",T),C.provide("isOpen",W),C.provide("focusedInput",O),C.provide("tempInputValue",q),C.provide("recentVariableSelectionTimestamp",Se),C.use(Ve,{container:"#windpressbuilderius-variable-app"}),C.component("inline-svg",Fe),C.mount("#windpressbuilderius-variable-app");function J(l){var a;!l.shiftKey||!l.target||((a=document==null?void 0:document.getSelection())==null||a.removeAllRanges(),l.preventDefault(),l.stopPropagation(),O.value=l.target,q.value=l.target.value,W.value=!0)}function N(l){O.value=l.target}const Te=["div.uniCssInput","div.uniCssColorpicker"];function Q(){setTimeout(()=>{var n;let l=!1;Te.forEach(u=>{(typeof u=="string"?[...document.querySelectorAll(u)]:[...document.querySelectorAll(u.selector)].filter(s=>u.hasChild.some(t=>s.querySelector(t)))).forEach(s=>{const t=s.querySelector("input[type='text']");(t==null?void 0:t.getAttribute("windpressbuilderius-variable-app"))!=="listened"&&(t==null||t.removeEventListener("click",J),t==null||t.addEventListener("click",J),t==null||t.removeEventListener("focus",N),t==null||t.addEventListener("focus",N),t==null||t.setAttribute("windpressbuilderius-variable-app","listened"),l=!0)})});const a=document.querySelector("div.uniSystemSelectClasses__valueWrapper span.uniSystemSelectClasses__placeholder")?"%root%":(n=document.querySelector("div.uniSystemSelectClasses__valueWrapper div.uniModuleCssSelectorItemSelected span"))==null?void 0:n.innerText;U.value!==a&&(U.value=a),l&&(O.value=null,q.value=null)},100)}let H=!1;Le({selector:".uniLeftPanelOuter",options:{subtree:!0,childList:!0},callback(){H||(H=!0,Q(),setTimeout(()=>{H=!1},100))}}),Q(),document.addEventListener("keydown",l=>{l.key==="Escape"&&W.value&&(W.value=!1)}),z(W,l=>{T.style.zIndex=l?"calc(Infinity)":"-1"}),z(U,(l,a)=>{l!==a&&(O.value=null,q.value=null)}),ee("Module loaded!",{module:"variable-picker"})});
