import{_ as f,__tla as $}from"../../../monaco-editor-00CT0F_7.min.js";import{l as q,c as F,T as H,t as z,f as O,n as T,H as W}from"../../../highlight-in-textarea-CLY2VO3M.js";import{d as V}from"../../../debounce-ymZcD929.min.js";import{r as h,w as A,n as _}from"../../../runtime-core.esm-bundler-BgTOpYpR.min.js";import"../../../isObject-CRxghtyK.min.js";Promise.all([(()=>{try{return $}catch{}})()]).then(async()=>{const M=e=>React.createElement("svg",{id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",...e},React.createElement("g",null,React.createElement("path",{d:"M176,384H16c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h160c8.832,0,16,7.2,16,16s-7.168,16-16,16 c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16c26.464,0,48-21.536,48-48S202.464,384,176,384z"})),React.createElement("g",null,React.createElement("path",{d:"M240,256c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16c8.832,0,16,7.2,16,16s-7.168,16-16,16H16 c-8.832,0-16,7.168-16,16c0,8.832,7.168,16,16,16h224c26.464,0,48-21.536,48-48S266.464,256,240,256z"})),React.createElement("g",null,React.createElement("path",{d:"M288,32C164.288,32,64,132.288,64,256c0,10.88,1.056,21.536,2.56,32h128.192c-1.792-4.992-2.752-10.4-2.752-16 c0-26.464,21.536-48,48-48c44.096,0,80,35.904,80,80c0,44.128-35.904,80-80,80h-0.416C249.76,397.408,256,413.92,256,432 c0,16.032-4.864,30.944-13.024,43.456c14.56,2.976,29.6,4.544,45.024,4.544c123.712,0,224-100.288,224-224S411.712,32,288,32z"})));let R=null;const N=e=>React.createElement(M,{...e,width:20,height:20,"aria-hidden":"true",focusable:"false"});(async()=>(await q(f(()=>import("../../../wasm-CG6Dc4jp.min.js"),[],import.meta.url)),R=await F({themes:[f(()=>import("../../../dark-plus-B74Y8nHz.min.js"),[],import.meta.url),f(()=>import("../../../light-plus-w1el_4yc.min.js"),[],import.meta.url)],langs:[f(()=>import("../../../css-g_GSZ1hr.min.js"),[],import.meta.url)]})))();const i=h(null);let k=null,y=[];wp.hooks.addAction("windpressgutenberg-autocomplete-items-refresh","windpressgutenberg",()=>{y=wp.hooks.applyFilters("windpressgutenberg-autocomplete-items",[],"")}),wp.hooks.doAction("windpressgutenberg-autocomplete-items-refresh");const o=new H({containerClass:"windpressgutenberg-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(e,t){const n=await wp.hooks.applyFilters("windpressgutenberg-autocomplete-items-query",y,e);t(n)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});o.setMenuContainer=function(e){this.menuContainer=e};const x=o.events.callbacks;o.events.callbacks=function(){return{...x.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length,a=this.tribute.menuSelected;n>a&&a>0?(this.tribute.menuSelected--,this.setActiveLi()):a===0&&(this.tribute.menuSelected=n-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),C()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length-1,a=this.tribute.menuSelected;n>a?(this.tribute.menuSelected++,this.setActiveLi()):n===a&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),C()}}}};let v=z(document.createElement("div"),{plugins:[O],allowHTML:!0,arrow:!1,duration:[500,null],followCursor:!0,trigger:"manual"});function L(){var r,d,p;if(((p=(d=(r=window.windpress)==null?void 0:r.loaded)==null?void 0:d.module)==null?void 0:p.classnameToCss)!==!0)return;const e=document.querySelector(".hit-container");if(e===null)return;v.reference=e;async function t(l){const s=l.textContent,c=await window.windpress.module.classnameToCss.generate(s);if(c===null||c.trim()==="")return null;v.setContent(R.codeToHtml(c,{lang:"css",theme:"dark-plus"})),v.show()}const n=h(null),a=V(function(l){const s=l.clientX,c=l.clientY,g=document.elementsFromPoint(s,c).find(D=>D.matches('mark[class="word"]'));n.value=g||null},10);e.addEventListener("mousemove",a),e.addEventListener("mouseleave",function(l){n.value=null}),A(n,(l,s)=>{l&&l!==s?t(l):v.hide()})}const b=h(null),u=h(null),m=h(null);function C(){let e=o.menu.querySelector("li.highlight>span.class-name");m.value&&E(m.value),m.value=e.dataset.tributeClassName,S(e.dataset.tributeClassName)}let w=null;const P=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(n=>{const a=n.querySelector(".class-name").dataset.tributeClassName;n.addEventListener("mouseenter",r=>{S(a)}),n.addEventListener("mouseleave",r=>{E(a)}),n.addEventListener("click",r=>{},{capture:!0})})})});function S(e){const t=document.querySelector('iframe[name="editor-canvas"]'),n=t.contentWindow||t,a=(t.contentDocument||n.document).getElementById(`block-${b.value}`);a&&a.classList.add(e)}function E(e){const t=document.querySelector('iframe[name="editor-canvas"]'),n=t.contentWindow||t,a=(t.contentDocument||n.document).getElementById(`block-${b.value}`);a&&u.value&&!u.value.includes(e)&&a.classList.remove(e)}A(i,(e,t)=>{e&&(T(i.value),o.attach(i.value),setTimeout(()=>{k=new W(i.value,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),i.value.focus(),L(),i.value.addEventListener("highlights-updated",function(n){L()}),i.value.addEventListener("tribute-active-true",function(n){w===null&&(w=document.querySelector(".windpressgutenberg-tribute-container>ul")),_(()=>{w&&P.observe(w,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),i.value.addEventListener("tribute-active-false",function(n){m.value&&E(m.value)}),_(()=>{I()})},10))});function I(){_(()=>{try{k.handleInput()}catch{}T.update(i.value),o.hideMenu()})}function B(e){return t=>{const{name:n,clientId:a,attributes:r,setAttributes:d}=t;React.useEffect(()=>{b.value=a,u.value=r.className});function p(s){d({className:s}),u.value=s}async function l(){var c,g;if(((g=(c=windpress==null?void 0:windpress.loaded)==null?void 0:c.module)==null?void 0:g.classSorter)!==!0)return;const s=await windpress.module.classSorter.sort(r.className);d({className:s}),u.value=s,I()}return React.createElement(React.Fragment,null,React.createElement(e,{...t}),React.createElement(wp.blockEditor.InspectorControls,null,React.createElement(wp.components.PanelBody,{title:wp.i18n.__("WindPress","windpress"),icon:N,initialOpen:!0},React.createElement(wp.components.PanelRow,{className:"windpressgutenberg-actions"},React.createElement(wp.components.ButtonGroup,null,React.createElement(wp.components.Button,{showTooltip:!0,label:wp.i18n.__("Automatic Class Sorting","windpress"),onClick:l},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"tabler-icon tabler-icon-reorder icon icon-tabler icons-tabler-outline icon-tabler-reorder"},React.createElement("path",{d:"M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),React.createElement("path",{d:"M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3"}),React.createElement("path",{d:"M16.5 8.5l2.5 2.5l2.5 -2.5"}))))),React.createElement(wp.components.TextareaControl,{value:r.className,onChange:s=>p(s),onInput:s=>p(s.target.value),ref:s=>i.value=s}))))}}wp.hooks.addFilter("editor.BlockEdit","windpress/add-class-inspector-controls",B)});
