import{l as e}from"../../../logger-BTW-zIW3.js";e("Loading..."),(async()=>{let r,n;for(e("waiting for the rootContainer...");!r;)r=document.querySelector('iframe[name="editor-canvas"]'),await new Promise(t=>setTimeout(t,100));e("finding WindPress script...");let o=!1,a=setTimeout(()=>{o=!0},45e3);for(;!o;){if(n=document.querySelectorAll("script"),n=Array.from(n).filter(t=>{let i=t.getAttribute("id");return i&&(i.startsWith("windpress:")||i.startsWith("vite-client"))&&!i.startsWith("windpress:integration-")}),n.length>0){clearTimeout(a);break}await new Promise(t=>setTimeout(t,100))}if(o){e("time out! failed to find WindPress script");return}e("found WindPress script");let c=r.contentWindow||r,s=r.contentDocument||c.document;for(;!s.head;)await new Promise(t=>setTimeout(t,300));e("injecting WindPress script into the root container");let d=s.querySelectorAll("script");Array.from(d).some(t=>{let i=t.getAttribute("id");return i&&i.startsWith("windpress:")})?e("WindPress script is already injected, skipping the injection process..."):(e("starting the root injection process..."),n.forEach(t=>{s.head.appendChild(document.createRange().createContextualFragment(t.outerHTML))}))})();
