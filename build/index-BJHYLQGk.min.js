import{g as V}from"./isObject-CRxghtyK.min.js";import{D as X,q as z,n as q,r as N,at as x,w as T,g as Y,o as Z,ak as G,j as ee,as as te,s as ne,f as _,Q as re}from"./runtime-core.esm-bundler-BgTOpYpR.min.js";function P(e){return Y()?(Z(e),!0):!1}function D(e){return typeof e=="function"?e():X(e)}const oe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ae=Object.prototype.toString,ie=e=>ae.call(e)==="[object Object]",W=()=>{};function se(e,t){function n(...a){return new Promise((o,s)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(o).catch(s)})}return n}const B=e=>e();function ue(e=B){const t=N(!0);function n(){t.value=!1}function a(){t.value=!0}const o=(...s)=>{t.value&&e(...s)};return{isActive:x(t),pause:n,resume:a,eventFilter:o}}function le(e){return G()}function ce(...e){if(e.length!==1)return ee(...e);const t=e[0];return typeof t=="function"?x(te(()=>({get:t,set:W}))):N(t)}function fe(e,t,n={}){const{eventFilter:a=B,...o}=n;return T(e,se(a,t),o)}function de(e,t,n={}){const{eventFilter:a,...o}=n,{eventFilter:s,pause:c,resume:g,isActive:w}=ue(a);return{stop:fe(e,t,{...o,eventFilter:s}),pause:c,resume:g,isActive:w}}function H(e,t=!0,n){le()?z(e,n):t?e():q(e)}const M=oe?window:void 0;function K(e){var t;const n=D(e);return(t=n==null?void 0:n.$el)!=null?t:n}function Q(...e){let t,n,a,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,o]=e,t=M):[t,n,a,o]=e,!t)return W;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const s=[],c=()=>{s.forEach(d=>d()),s.length=0},g=(d,l,S,m)=>(d.addEventListener(l,S,m),()=>d.removeEventListener(l,S,m)),w=T(()=>[K(t),D(o)],([d,l])=>{if(c(),!d)return;const S=ie(l)?{...l}:l;s.push(...n.flatMap(m=>a.map(y=>g(d,m,y,S))))},{immediate:!0,flush:"post"}),v=()=>{w(),c()};return P(v),v}function pe(){const e=N(!1),t=G();return t&&z(()=>{e.value=!0},t),e}function me(e){const t=pe();return _(()=>(t.value,!!e()))}function ge(e,t={}){const{window:n=M}=t,a=me(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const s=N(!1),c=v=>{s.value=v.matches},g=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",c):o.removeListener(c))},w=re(()=>{a.value&&(g(),o=n.matchMedia(D(e)),"addEventListener"in o?o.addEventListener("change",c):o.addListener(c),s.value=o.matches)});return P(()=>{w(),g(),o=void 0}),s}const I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof V<"u"?V:typeof self<"u"?self:{},J="__vueuse_ssr_handlers__",ve=ye();function ye(){return J in I||(I[J]=I[J]||{}),I[J]}function R(e,t){return ve[e]||t}function we(e){return ge("(prefers-color-scheme: dark)",e)}function he(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Se={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},$="vueuse-storage";function U(e,t,n,a={}){var o;const{flush:s="pre",deep:c=!0,listenToStorageChanges:g=!0,writeDefaults:w=!0,mergeDefaults:v=!1,shallow:d,window:l=M,eventFilter:S,onError:m=r=>{console.error(r)},initOnMounted:y}=a,p=(d?ne:N)(typeof t=="function"?t():t);if(!n)try{n=R("getDefaultStorage",()=>{var r;return(r=M)==null?void 0:r.localStorage})()}catch(r){m(r)}if(!n)return p;const h=D(t),O=he(h),b=(o=a.serializer)!=null?o:Se[O],{pause:j,resume:f}=de(p,()=>F(p.value),{flush:s,deep:c,eventFilter:S});l&&g&&H(()=>{n instanceof Storage?Q(l,"storage",E):Q(l,$,C),y&&E()}),y||E();function A(r,i){if(l){const u={key:e,oldValue:r,newValue:i,storageArea:n};l.dispatchEvent(n instanceof Storage?new StorageEvent("storage",u):new CustomEvent($,{detail:u}))}}function F(r){try{const i=n.getItem(e);if(r==null)A(i,null),n.removeItem(e);else{const u=b.write(r);i!==u&&(n.setItem(e,u),A(i,u))}}catch(i){m(i)}}function k(r){const i=r?r.newValue:n.getItem(e);if(i==null)return w&&h!=null&&n.setItem(e,b.write(h)),h;if(!r&&v){const u=b.read(i);return typeof v=="function"?v(u,h):O==="object"&&!Array.isArray(u)?{...h,...u}:u}else return typeof i!="string"?i:b.read(i)}function E(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){p.value=h;return}if(!(r&&r.key!==e)){j();try{(r==null?void 0:r.newValue)!==b.write(p.value)&&(p.value=k(r))}catch(i){m(i)}finally{r?q(f):f()}}}}function C(r){E(r.detail)}return p}const be="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ae(e={}){const{selector:t="html",attribute:n="class",initialValue:a="auto",window:o=M,storage:s,storageKey:c="vueuse-color-scheme",listenToStorageChanges:g=!0,storageRef:w,emitAuto:v,disableTransition:d=!0}=e,l={auto:"",light:"light",dark:"dark",...e.modes||{}},S=we({window:o}),m=_(()=>S.value?"dark":"light"),y=w||(c==null?ce(a):U(c,a,s,{window:o,listenToStorageChanges:g})),p=_(()=>y.value==="auto"?m.value:y.value),h=R("updateHTMLAttrs",(f,A,F)=>{const k=typeof f=="string"?o==null?void 0:o.document.querySelector(f):K(f);if(!k)return;const E=new Set,C=new Set;let r=null;if(A==="class"){const u=F.split(/\s/g);Object.values(l).flatMap(L=>(L||"").split(/\s/g)).filter(Boolean).forEach(L=>{u.includes(L)?E.add(L):C.add(L)})}else r={key:A,value:F};if(E.size===0&&C.size===0&&r===null)return;let i;d&&(i=o.document.createElement("style"),i.appendChild(document.createTextNode(be)),o.document.head.appendChild(i));for(const u of E)k.classList.add(u);for(const u of C)k.classList.remove(u);r&&k.setAttribute(r.key,r.value),d&&(o.getComputedStyle(i).opacity,document.head.removeChild(i))});function O(f){var A;h(t,n,(A=l[f])!=null?A:f)}function b(f){e.onChanged?e.onChanged(f,O):O(f)}T(p,b,{flush:"post",immediate:!0}),H(()=>b(p.value));const j=_({get(){return v?y.value:p.value},set(f){y.value=f}});try{return Object.assign(j,{store:y,system:m,state:p})}catch{return j}}export{U as a,Ae as u};
